<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Yolo</title>
	<link href='https://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'>
	<link rel="stylesheet" type="text/css" href="weather-icons-master/css/weather-icons.min.css">
	<link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">
	<style type="text/css">
	
		* {
			font-family: 'Open Sans', sans-serif;
			list-style-type: none;
			vertical-align: middle;
			background-color: #000;
			color: #FFF !important;
			font-size: 24px;
		}

		body {
			background-color: #000;
		}

		#time {
			font-size: 56px;
			margin-left: -10px;
		}

		#date {
			text-align: left;
			font-size: 24px;
		}

		#temp {
			font-size: 56px;
			text-align: right;
		}

		#temp i {
			font-size: 56px;
		}

		#cityState {
		}

		#riseSet {
			text-align: left;
			font-size: 24px;
		}

		#highLow {
			text-align: right;
			font-size: 24px;
		}

		#reddit {
			text-align: center;
			padding-bottom: 1em;
			font-size: 24px;
		}

		i {
			vertical-align: 5%;
			font-size: 24px;
		}

		.push {
			padding-top: 2em;
		}


	
	</style>

	<script type="text/javascript">

	function startTime() {
		var today = new Date();
		var h = today.getHours();

		switch(h) {
			case 13:
				h = 1;
				break;
			case 14:
				h = 2;
				break;
			case 15:
				h = 3;
				break;
			case 16:
				h = 4;
				break;
			case 17:
				h = 5;
				break;
			case 18:
				h = 6;
				break;
			case 19:
				h = 7;
				break;
			case 20:
				h = 8;
				break;
			case 21:
				h = 9;
				break;
			case 22:
				h = 10;
				break;
			case 23:
				h = 11;
				break;
			case 0:
				h = 12;
				break;
		}

		var m = today.getMinutes();
		var s = today.getSeconds();
		var y = today.getFullYear()
		var monthNames = ["January", "February", "March", "April", "May", "June",
		  "July", "August", "September", "October", "November", "December"
		];
		var dayNames = ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"]
		var day = dayNames[today.getDay()];


		m = checkTime(m);
		s = checkTime(s);

		month = monthNames[today.getMonth()];
		date = today.getDate();
		var abv = 'th';

		switch (date) {
			case 1:
			case 21:
			case 31:
				abv = 'st';
				break;
			case 2:
			case 22:
				abv = 'nd';
				break;
			case 3:
			case 23:
				abv = 'rd';
				break;

		}

		document.getElementById('time').innerHTML = h + ":" + m + ":" + s;
		document.getElementById('date').innerHTML = day + ', ' + month + ' ' + date + abv;
		var t = setTimeout(startTime, 500);
	}

	function checkTime(i) {
	    if (i < 10) {i = "0" + i};  // add zero in front of numbers < 10
	    return i;
	}


	</script>

	

</head>
<body onload="startTime()">
		<div class="container">
			<div class="row push">
				<div class="col-xs-6">
					<div id="time"></div>
					<div id="date"></div>
					<div id="riseSet"></div>
					<!-- <div id="cityState"></div> -->
				</div>
				<div class="col-xs-6">
					<div id="temp"></div>
					<div id="highLow"></div>
				</div>
			</div>
			<div class="row push">
				<nav class="navbar navbar-default navbar-fixed-bottom">
				  <div class="container">
				    <div class="col-md-12 center-block text-center" id="reddit"></div>
				  </div>
				</nav>
			</div>
</body>


<script type="text/javascript">
		var y_api = "https://query.yahooapis.com/v1/public/yql?q=select * from weather.forecast where woeid in (select woeid from geo.places(1) where text='ferndale, mi')&format=json"
		call();
		var interval = window.setInterval(call, 1800000);


		function call() {
		var xhr = new XMLHttpRequest();
		xhr.open("GET", y_api, false);
		xhr.send()

		var data = JSON.parse(xhr.responseText);


		var city = data.query.results.channel.location.city;
		var state = data.query.results.channel.location.region;
		var temp = data.query.results.channel.item.condition.temp;
		var rise = data.query.results.channel.astronomy.sunrise;
		var set = data.query.results.channel.astronomy.sunset;
		var high = data.query.results.channel.item.forecast[0].high;
		var low = data.query.results.channel.item.forecast[0].low;
		var weather_code = data.query.results.channel.item.forecast[0].code;
		var weather_icon = '';

		switch(parseInt(weather_code)) {
			// Tornado
			case 0:
			case 2:  
				weather_icon = '<i class="wi wi-tornado"></i>';
				break;

			// Storm
			case 1:
			case 3:
			case 4:
			case 37:
			case 38:
			case 39:
			case 40:
			case 45:
			case 47: 
				weather_icon = '<i class="wi wi-storm-showers"></i>';
				break;	

			// Snow
			case 5:
			case 6:
			case 7:
			case 13:
			case 14:
			case 15:
			case 16:
			case 18:
			case 19:
			case 25:
			case 41:
			case 42:
			case 43:
			case 46:
				weather_icon = '<i class="wi wi-snow"></i>';
				break;	

			// Rain
			case 8:
			case 9:
			case 10:
			case 11:
			case 12:
			case 17:
			case 35:
				weather_icon = '<i class="wi wi-sprinkle"></i>';
				break;

			// fog
			case 20:
			case 21:
			case 22:
				weather_icon = '<i class="wi wi-fog"></i>';
				break;

			// wind
			case 23:
			case 24:
				weather_icon = '<i class="wi wi-strong-wind"></i>';
				break;

			// cloudy
			case 26:
			case 27:
			case 28:
			case 29:
			case 30:
			case 44:
				weather_icon = '<i class="wi wi-cloudy"></i>';
				break;
				
			// Night clear
			case 31:
			case 33:
				weather_icon = '<i class="wi wi-night-clear"></i>';
				break;

			// sunny
			case 32:
			case 34:
			case 36: 
				weather_icon = '<i class="wi wi-day-sunny"></i>';
				break;

			case 3200:
				weather_icon = '<i class="wi wi-meteor"></i>';
				break;

			default:
				weather_icon = '<i class="wi wi-meteor"></i>';
				break;
				
		}


		document.getElementById("temp").innerHTML = weather_icon + ' '.concat(temp + '&deg;');
		document.getElementById("highLow").innerHTML = 'High: '.concat(high + '&deg; / ') + 'Low: '.concat(low + '&deg;'); 
		// document.getElementById("cityState").innerHTML = city.concat(', ' + state);
		document.getElementById("riseSet").innerHTML = rise + ' <i class="wi wi-horizon"></i> ' + set;

		var r_xhr = new XMLHttpRequest();
		r_xhr.open('GET', 'https://www.reddit.com/r/news/hot.json?limit=1', false);
		r_xhr.send();


		r_data = JSON.parse(r_xhr.responseText);

		document.getElementById("reddit").innerHTML = r_data.data.children[0].data.title;
	}


</script>
</html>
